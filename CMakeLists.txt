CMAKE_MINIMUM_REQUIRED(VERSION 2.4)

IF(COMMAND CMAKE_POLICY)
  CMAKE_POLICY(SET CMP0003 NEW)
ENDIF(COMMAND CMAKE_POLICY)

PROJECT("DeskVOX Volume Explorer")

ADD_DEFINITIONS(-DNODLL)

IF(MSVC)
  ADD_DEFINITIONS(-D_CRT_SECURE_NO_WARNINGS)
ENDIF(MSVC)

LIST(APPEND CMAKE_MODULE_PATH ${PROJECT_SOURCE_DIR}/cmake)

SET(VIRVO_DIR ${PROJECT_SOURCE_DIR}/virvo)
SET(VIRVO_INCLUDE_DIR ${VIRVO_DIR}/virvo)
SET(VIRVO_SHADER_DIR ${VIRVO_DIR}/shader)
SET(VIRVO_SOURCE_DIR ${VIRVO_DIR}/virvo)

SET(INSTALL_DIR_BIN bin)
SET(INSTALL_DIR_INCLUDE include)
SET(INSTALL_DIR_LIB lib)
SET(INSTALL_DIR_SHARE share)

INCLUDE(GenerateConfigHeader)

IF(CUDA_FOUND)
  INCLUDE_DIRECTORIES(${CUDA_TOOLKIT_INCLUDE})
  #SET(EXTRA_LIBS ${EXTRA_LIBS} ${CUDA_LIBRARIES})
ENDIF(CUDA_FOUND)

INCLUDE_DIRECTORIES(${VIRVO_INCLUDE_DIR})
ADD_SUBDIRECTORY(${VIRVO_DIR})
ADD_SUBDIRECTORY(${PROJECT_SOURCE_DIR}/vox-desk)

SET(CPACK_GENERATOR "ZIP")
INCLUDE(CPack)

IF(${CMAKE_VERSION} VERSION_GREATER "2.8.2")
  INCLUDE(FeatureSummary)
  FEATURE_SUMMARY(WHAT ALL)
ENDIF()
